<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="static/css/fund.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="static/css/tabbar.css">
    <title>基金</title>
</head>

<body>
    <div class="app" style="overflow: hidden;">
        <div style="display: none;" :style="{display: load_type == 1?'inline':'none'}">
            <div class="head">基金</div>
            <div class="content" style="margin-bottom: 62px;">
                <div class="item" v-for="(row,i) in data_arr">
                    <img class="goods" :src="uploadUrl+row.pic">
                    <div style="width: 100%;padding-right: 13px;">
                        <div class="item_box">
                            <div>{{row.title}}</div>
                            <div @click="setMsg(row)" class="item_btn">购买</div>
                        </div>
                        <div style="display: flex;">
                            <div class="item_box2">
                                <div style="font-size: 18px; color: #FB861F;">￥{{row.qtje}}</div>
                                <div>起购价</div>
                            </div>
                            <div class="item_box2">
                                <div style="font-size: 18px; color: #F72130;">{{row.jyrsy}}%</div>
                                <div>分红比例</div>
                            </div>
                        </div>
                    </div>
                    <img class="shouqing" :class="{shouqing2: row.tzzt == 1}" src="static/image/shouqing.png">
                </div>
            </div>
        </div>




        <div class="tabbar">
            <a class="" href="home.html">
                <img v-if="title_type != 1" src="static/image/home1.png">
                <div v-if="title_type != 1" style="color:#999999;text-align: center">首页</div>
                <img v-if="title_type == 1" src="static/image/home.png">
                <div v-if="title_type == 1" style="color:#F23F5C;text-align: center">首页</div>
            </a>
            <a class="" href="equity.html">
                <img v-if="title_type != 2" src="static/image/gupiao1.png">
                <div v-if="title_type != 2" style="color:#999999;text-align: center">股权</div>
                <img v-if="title_type == 2" src="static/image/gupiao.png">
                <div v-if="title_type == 2" style="color:#F23F5C;text-align: center">股权</div>
            </a>
            <a class="" href="fund.html">
                <img v-if="title_type != 3" src="static/image/jijin1.png">
                <div v-if="title_type != 3" style="color:#999999;text-align: center">基金</div>
                <img v-if="title_type == 3" src="static/image/jijin.png">
                <div v-if="title_type == 3" style="color:#F23F5C;text-align: center">基金</div>
            </a>
            <a class="" href="my.html">
                <img v-if="title_type != 4" src="static/image/my1.png">
                <div v-if="title_type != 4" style="color:#999999;text-align: center">我的</div>
                <img v-if="title_type == 4" src="static/image/my.png">
                <div v-if="title_type == 4" style="color:#F23F5C;text-align: center">我的</div>
            </a>
            </a>
        </div>
    </div>

</body>
<script type="text/javascript" src="static/js/jquery-3.1.1.min.js"></script>
<script src="static/js/vue.js"></script>
<script src="static/js/vue.min.js"></script>
<script charset="utf-8" src="static_new/js/dialog.min.js"></script>
<link rel="stylesheet" href="static_new/css/public.css">
<script src="static/js/helper.js"></script>
<script type="text/javascript">
    var app = new Vue({
        el: '.app',
        data: {
            title_type: 0,
            page: 0,
            last_page: 1,
            data_arr: [],
            load_type: 0,
            uploadUrl: ''
        },
        mounted: function() {
            this.uploadUrl = uploadUrl;
            let t = $(document).attr('title');
            if (t == '首页') {
                this.title_type = 1;
            } else if (t == '股权') {
                this.title_type = 2;
            } else if (t == '基金') {
                this.title_type = 3;
            } else if (t == '我的') {
                this.title_type = 4;
            }
            this.loadData();
        },
        methods: {
            jump(e) {
                $(location).attr('href', e);
            },
            setMsg(row) {
                console.log('法克', row)
                window.localStorage.setItem("goods_msg", '')
                window.localStorage.setItem("goods_msg", JSON.stringify(row))
                this.jump('index.html?type=0');
            },
            loadData() {
                this.page++;
                if (this.page > this.last_page) {
                    return
                };
                var loading = null;
                loading = $(document).dialog({
                    type: 'notice',
                    infoIcon: 'static_new/img/loading.gif',
                    infoText: '正在加载中',
                    autoClose: 0
                });
                http_api.http_send('projects/13', {
                        page: this.page
                    }, 'POST',
                    (res) => {
                        this.load_type = 1;
                        loading.close();
                        console.log('数据', res)
                        if (res.status) {
                            this.last_page = res.data.products.last_page
                            for (let k in res.data.products.data) {
                                this.data_arr.push(res.data.products.data[k])
                            }

                        }
                    });
            }
        },
        created() {
            $(window).scroll(() => {
                if ($(window).scrollTop() + $(window).height() == $(document).height()) {
                    this.loadData();
                }
            });
        }
    })
</script>

</html>