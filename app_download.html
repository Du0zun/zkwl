<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="static/css/app_download.css" rel="stylesheet" type="text/css">
    <title>app下载</title>
</head>

<body>
    <div class="app" style="overflow: hidden;">
        <div class="bg">
            <input name="" id="webcopyinput" type="text" style="color: #FF0000; font-size: 20px; width: 1px; height: 1px; border: hidden; font-weight: bold; text-align: center;" value="">
            <div class="head_title">
                <img @click="back()" class="back" src="static/image/back2.png">
                <div class="title">推广链接</div>
            </div>
            <div class="contnet">
                <div class="item_title">推广链接</div>
                <div class="link">
                    {{url}}
                </div>
                <div style="display: flex;justify-content: center;">
                    <div class="copy_btn" @click="copy_txt(url)">复制到浏览器打开</div>
                </div>
                <div class="item_title" style="margin-top: 45px;">APP下载链接</div>
                <div class="link">
                    {{AppDownloadUrl}}
                </div>
                <div style="display: flex;justify-content: center;">
                    <div class="copy_btn" style="font-size: 12px;" @click="copy_txt(AppDownloadUrl)">复制到浏览器打开，先下载安装在注册</div>
                </div>
            </div>
        </div>

    </div>

</body>
<script type="text/javascript" src="static/js/jquery-3.1.1.min.js"></script>
<script src="static/js/vue.js"></script>
<script src="static/js/vue.min.js"></script>
<script charset="utf-8" src="static_new/js/dialog.min.js"></script>
<link rel="stylesheet" href="static_new/css/public.css">
<script src="static/js/helper.js"></script>
<script type="text/javascript">
    var app = new Vue({
        el: '.app',
        data: {
            invicode: '',
            url: '',
            AppDownloadUrl: '',
        },
        mounted: function() {
            this.invicode = window.localStorage.getItem("invicode");
            this.url = reg_url + this.invicode + '&type=1';
            var loading = null;
            loading = $(document).dialog({
                type: 'notice',
                infoIcon: 'static_new/img/loading.gif',
                infoText: '正在加载中',
                autoClose: 0
            });
            http_api.http_send('update_download', {}, 'POST',
                (res) => {
                    loading.close();
                    this.AppDownloadUrl = res.data.AppDownloadUrl;
                })
        },
        methods: {
            back() {
                window.history.go(-1)
            },
            copy_txt(xx) {
                var text = document.getElementById("webcopyinput");
                text.id = 'webcopyinput';
                text.value = '' + xx + '';
                text.focus(); //给input输入框聚焦
                text.setSelectionRange(0, text.value.length); //设置input框选中的范围
                copied = document.execCommand('Copy'); //执行复制操作
                text.blur();
                copied = false;
                document.body.scrollTop = 0;
                $(document).dialog({
                    infoText: '复制成功'
                });
            }
        },
        created() {

        }
    })
</script>

</html>