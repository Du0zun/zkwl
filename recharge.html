<!DOCTYPE html>
<!-- saved from url=(0041)http://qiang6-www.baomiche.com/#/Recharge -->
<html data-dpr="1" style="font-size: 37.5px;">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1">
    <title>充值</title>
    <link href="static/css/app.7b22fa66c2af28f12bf32977d4b82694.css" rel="stylesheet">
    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/dialog.min.js"></script>
    <script src="static/js/common.js"></script>
    <link rel="stylesheet" href="static/css/public.css">
    <link href="static/css/index-guquan.css" rel="stylesheet" type="text/css">
    <style type="text/css" title="fading circle style">
        .circle-color-8>div::before {
            background-color: #ccc;
        }
    </style>
</head>

<body style="font-size: 12px;">
    <div id="app" class="app">
        <div data-v-7d87b156="" class="main">
            <div data-v-7d87b156="" class="header">
                <div class="left_btn" onclick=" window.history.go(-1)"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMC0wMi0wNFQyMDoyNToxMCswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjAtMDItMDVUMDY6Mzk6MDkrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMDItMDVUMDY6Mzk6MDkrMDg6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTRjY2JmNDktYjRlOC04ODRjLWI1ZTUtM2FkYjVkMDViM2VkIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjgwNTVCRkZCNjI3NzExRTlBNDkxREZFMzIwMkZEMUZEIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ODA1NUJGRkI2Mjc3MTFFOUE0OTFERkUzMjAyRkQxRkQiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MDU1QkZGODYyNzcxMUU5QTQ5MURGRTMyMDJGRDFGRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4MDU1QkZGOTYyNzcxMUU5QTQ5MURGRTMyMDJGRDFGRCIvPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGNjYmY0OS1iNGU4LTg4NGMtYjVlNS0zYWRiNWQwNWIzZWQiIHN0RXZ0OndoZW49IjIwMjAtMDItMDVUMDY6Mzk6MDkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4QXxioAAABwklEQVRIia3Wy4uOcRQH8M+4JcqlJCmilJqFIgsWQuTrlgUphaKUv0pZWExRGrkdclcWElkoZSELSXKtSaKxeH82vDPemfc99ezO6dPveX7nPGdofHxcP5FkHkawEZuq6k23vFl9IvNxBVsxjkXoCs3oA1mA6w35hVNV9Xyi/GmdKMlCXMPmhpyoqnOT1UwZSrIYN3S+yU8cr6qR/9VNCUqypCHr8QNHq+pCL7U9Q0mW4ibWNeRwVV3qtb4nKMky3MIwvuNQVV3tFekJSrIct7EWYzhYVTUV5L9QkhUNWdOQ/VV1Z6rIpFCSVQ1ZjW/YV1UPpoMwQcMmGcb9hnzBnn4QGPp71iVZi7tYhs/YVVWP+0HofqJf7YEhzO4X6QpV1SvswGssxPUkW/qF/nl1fyLJSp3e6fvGMcn0bv+VrXiJebicZNfAoYa9xTa8aNhokr0Dhxr2DtvxHHNxMcmBgUMNe69zQZ5iDs4nOTRwqGEfGvakYSNJjgwcatinhj3SGV/nkhwbONSwL9iNh5iJs0lODhxq2NeG3WvYmSSnJ6uZsGF7ibbTjWKnzrq1oaqedcud9roFVTWGA7ios899nCj3N99UoTDBVxt6AAAAAElFTkSuQmCC"
                        alt="" class="return"></div>
                <div class="Maintitle">
                    <h3>充值</h3>
                </div>
                <div class="right_btn">
                    <a data-v-7d87b156="" href="javascript:;" class="">
                        <h3 data-v-7d87b156="">充值记录</h3>
                    </a>
                </div>
            </div>
            <div data-v-7d87b156="" class="Cash_num main2">
                <h3 data-v-7d87b156="">充值金额</h3>
                <div data-v-7d87b156="" class="Cash_num_money"><span data-v-7d87b156="">￥</span><input data-v-7d87b156="" name="price" type="text" placeholder="请输入充值金额"></div>
                <h4 data-v-7d87b156="">充值说明</h4>
                <div data-v-7d87b156="" class="Cash_num_password"><span data-v-7d87b156="" class="col-xs-3">200元</span><span data-v-7d87b156="" class="col-xs-3">500元</span><span data-v-7d87b156="" class="col-xs-3">1000元</span><span data-v-7d87b156="" class="col-xs-3">3000元</span><span data-v-7d87b156=""
                        class="col-xs-3">5000元</span><span data-v-7d87b156="" class="col-xs-3">10000元</span><span data-v-7d87b156="" class="col-xs-3">20000元</span><span data-v-7d87b156="" class="col-xs-3">30000元</span></div>
            </div>
            <div class="content" style="margin-top: 18px; padding:0">

                <div class="item">
                    <div class="item_box">
                        <div class="item_msg">
                            <div style="display: flex;">
                                <div>收款户名</div>
                            </div>
                            <div style="margin-right: 13px;">{{back_data.bankname}}</div>
                        </div>
                    </div>
                    <div class="item_box">
                        <div class="item_msg">
                            <div style="display: flex;">
                                <div>收款账号</div>
                            </div>
                            <div style="margin-right: 13px;">{{back_data.bankcode}}</div>
                        </div>
                    </div>
                    <div class="item_box">
                        <div class="item_msg" style="margin-bottom: 10px;">
                            <div style="display: flex;">
                                <div>收款银行</div>
                            </div>
                            <div style="margin-right: 13px;">{{back_data.bankname}}</div>
                        </div>
                    </div>
                    <div class="item_box" style="font-size:14px">上传凭证</div>
                    <div class="item_box">
                        <img @click="upload()" class="upload" :src="upload_src">
                        <input id="upload" name="file" accept="image/*" type="file" style="display: none;" />
                    </div>
                </div>
            </div>
            <button data-v-7d87b156="" @click="buy()" class="next save-btn">提交</button>

            <div data-v-7d87b156="" class="Cash_num paytype" style="display: none ;">
                <h3 data-v-7d87b156="">请选择支付通道</h3>
                <ul data-v-7d87b156="" class="open_Lottery_ul">

                    <li data-v-7d87b156="" class="save-btn2" data-id="card"><img data-v-7d87b156="" src="static/picture/card.png" onerror="this.src='/static_new6/img/unionpay.jpg'" alt="">
                        <div data-v-7d87b156="" class="open_Lottery_ul_con">
                            <h3 data-v-7d87b156="">银行卡转账<span data-v-7d87b156="" style="display: block;display: block;background: red;padding: 1px 4px;color: #fff;border-radius: 3px;">推荐</span></h3>
                            <h4 data-v-7d87b156="">银行卡转账&nbsp;</h4>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

    </div>
    <script type="text/javascript" src="static/js/jquery-3.1.1.min.js"></script>
    <script src="static/js/vue.js"></script>
    <script src="static/js/vue.min.js"></script>
    <script charset="utf-8" src="static_new/js/dialog.min.js"></script>
    <link rel="stylesheet" href="static_new/css/public.css">
    <script src="static/js/helper.js"></script>
    <script type="text/javascript">
        var app = new Vue({
            el: '.app',
            data: {
                upload_src: 'static/image/upload.png',
                upload_src2: '',
                back_data: '',
                uploadUrl: ''
            },
            mounted: function() {
                this.uploadUrl = uploadUrl;
                var loading = null;
                loading = $(document).dialog({
                    type: 'notice',
                    infoIcon: 'static_new/img/loading.gif',
                    infoText: '正在加载中',
                    autoClose: 0
                });
                http_api.http_send('user/sysAccount', {}, 'POST',
                    (res) => {
                        loading.close();
                        if (res.status == -1) {
                            this.jump('login.html')
                            return;
                        }
                        if (res.status) {
                            this.back_data = res.data;
                        }
                    })
            },
            methods: {
                buy() {
                    if (!$("input[name=price]").val()) {
                        $(document).dialog({
                            infoText: '请输入金额'
                        });
                        return;
                    }
                    if (!this.upload_src2) {
                        $(document).dialog({
                            infoText: '未上传凭证'
                        });
                        return;
                    }

                    var loading = null;
                    loading = $(document).dialog({
                        type: 'notice',
                        infoIcon: 'static_new/img/loading.gif',
                        infoText: '正在加载中',
                        autoClose: 0
                    });
                    let data = {
                        amount: $("input[name=price]").val(), // 金额
                        paymentid: 3, // 默认3(1 支付宝, 2 微信, 3 银行卡)
                        payimg: this.upload_src2, // 交易凭证
                    }
                    http_api.http_send('user/recharge', data, 'POST',
                        (res) => {
                            loading.close();
                            $(document).dialog({
                                infoText: res.msg
                            });
                            console.log('数据', res)
                            if (res.status) {
                                setTimeout(() => {
                                    this.back();
                                }, 1500);
                            }
                        })
                },
                upload() {
                    let self = this;
                    console.log('上传图片')
                    $("#upload").click();
                    $("#upload").on("change", function() {
                        // let objUrl = self.getObjectURL(this.files[0])
                        // self.upload_src = objUrl;
                        self.gosubmit();
                    })
                },
                gosubmit() {
                    var formData = new FormData();
                    formData.append("file", $("#upload")[0].files[0]);
                    var user = window.localStorage.getItem("user");
                    var lastsession = user ? user : 0;
                    var timestamp = Date.parse(new Date()) / 1000;
                    formData.append("timestamp", timestamp);
                    formData.append("lastsession", lastsession);

                    $.ajax({
                        url: http_url + "uploadImg",
                        type: "post",
                        data: formData,
                        processData: false, // 告诉jQuery不要去处理发送的数据
                        contentType: false, // 告诉jQuery不要去设置Content-Type请求头
                        dataType: 'text',
                        success: (res) => {
                            let data_res = JSON.parse(res);
                            this.upload_src = this.uploadUrl + data_res.data;
                            this.upload_src2 = data_res.data;
                        },
                        error: function(data) {

                        }
                    });

                },
                getObjectURL(file) {
                    var url = null;
                    if (window.createObjectURL != undefined) { // basic
                        url = window.createObjectURL(file);
                    } else if (window.URL != undefined) { // mozilla(firefox)
                        url = window.URL.createObjectURL(file);
                    } else if (window.webkitURL != undefined) { // webkit or chrome
                        url = window.webkitURL.createObjectURL(file);
                    }
                    return url;
                },
                back() {
                    window.history.go(-1)
                },
                buy_btn1() {
                    if (this.buy_num == this.qgsl) return;
                    this.buy_num--
                },
                buy_btn2() {
                    this.buy_num++
                },
                jump(e) {
                    $(location).attr('href', e);
                }
            },
            created() {

            }
        })
    </script>
    <script type="application/javascript">
        var type = '';
        $(function() {
            function check() {
                if ($("input[name=price]").val() == '') {
                    $(document).dialog({
                        infoText: '输入充值金额'
                    });
                    return false;
                }
                return true;
            }

            $('.Cash_num_password span').click(function() {
                var tt = $(this).text();
                tt = tt.replace('元', '');
                $("input[name=price]").val(tt)
            })







            //-----------------------------------
        })
    </script>
</body>

</html>